<style type="text/css" media="screen">
#patchedit .pdiffeditor { 
	margin: 0;
	position: absolute;
	top: 0;
	bottom: 0;
	left: 0;
	right: 0;
}
</style>
<script src="/javascripts/ace/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="/javascripts/ace/theme-chrome.js" type="text/javascript" charset="utf-8"></script>
<script src="/javascripts/ace/mode-diff.js" type="text/javascript" charset="utf-8"></script>

<input id="id" type="hidden" value="{{ patch.id }}">

<div id="patchedit">
    <textarea id="psrc" rows="25" cols="80" name="psrc" style="display:none;">{{ patch.content }}</textarea>
    <pre class="pdiffeditor" id="pdiffeditor">{{ patch.content }}</pre>
</div>

<script type="text/javascript">
	(function($) {
		$(document).ready(function () {
			var editor = ace.edit("pdiffeditor");
			editor.setTheme("ace/theme/chrome");
			editor.getSession().setMode("ace/mode/diff");
			editor.getSession().setUseSoftTabs(false);
			editor.getSession().setTabSize(8);
			$("#patchedit").bind( "dialogbeforeclose", function(event, ui) {
				$("#psrc").val(editor.getValue());
			});
		});
	})(jQuery);
</script>
